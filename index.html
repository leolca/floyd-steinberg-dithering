<!DOCTYPE html>
<html>
<head>
<title>dither</title>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<link rel='stylesheet' type='text/css' href='style.css'>
</head>
<body>

<h1>variations on the Floyd-Steinberg dithering algorithm</h1>

<!--
Image URL:
-->
<input id='url' type='hidden' value='image/vanitas.png' />

<section id='display-section' ondrop='dropFile(event);' ondragover='dragOver(event);' ondragenter='dragOver(event)';>
  <canvas id='screen' width=512 height=512></canvas>
  <br>
  <button id="save-button">Save Dithered Image</button>
</section>

<section id='dashboard-section'>
  <div>
    For details about how this works, see the README at
    <br>
    <a href='https://github.com/leolca/floyd-steinberg-dithering'>https://github.com/leolca/floyd-steinberg-dithering</a>
  </div>

  <div>
  <label for="image_selector">Select an image:</label>
  <select id="image_selector">
    <option value="image/vanitas.png">Vanitas</option>
    <option value="image/lenna.png">Lena</option>
    <option value="image/airplane.png">Airplane</option>
    <option value="image/sailboat.png">Sailboat</option>
    <option value="image/pepper.png">Pepper</option>
    <option value="image/church.png">Church</option>
    <option value="image/inner-ear.png">Inner Ear</option>
    <option value="image/graylevels.png">Gray levels 50, 25, 12.5 and 6.25</option>
    <option value="image/gray_64.png">Gray level 25</option>
    <option value="image/gray_128.png">Gray level 50</option>
    <option value="image/gray_172.png">Gray level 75</option>
    <option value="image/gray_224.png">Gray level 87.5</option>
    <option value="image/gradient-horizontal.png">Gradient Horizontal</option>
    <option value="image/gradient-vertical.png">Gradient Vertical</option>
    <option value="image/gradient-diagonal.png">Gradient Diagonal</option>
    <option value="image/mario.png">Mario Bros</option>
    <option value="image/groo.png">Groo</option>
    <option value="image/SIP.png">SIP</option>
    <option value="image/ggplot.png">ggplot</option>
    <option value="image/ggplot-density.png">ggplot density</option>
    <option value="image/ggplot-sd.png">ggplot stacked density</option>
    <option value="file_input_trigger">Choose your own image...</option>
  </select>
  
  <input type="file" id="file_input" accept="image/*" style="display: none;" />
    <br>
    Weights for distributing error to neighboring pixels:
    <br>
    <input id='a' value='7' type='range' step='1' min='0' max='24' />
    <label id='a-label'>7</label> (right)
    <br>
    <input id='b' value='3' type='range' step='1' min='0' max='24' />
    <label id='b-label'>3</label> (down left)
    <br>
    <input id='c' value='5' type='range' step='1' min='0' max='24' />
    <label id='c-label'>5</label> (down)
    <br>
    <input id='d' value='1' type='range' step='1' min='0' max='24' />
    <label id='d-label'>1</label> (down right)
    <br>
    <br>
    <input id='contrast' value='0' type='range' step='0.01' min='-1' max='1' />
    <label id='contrast-label'>0</label> (contrast)
    <br>
    <br>
    <label for="serpentine">Use Serpentine Scanning:</label>
    <input type="checkbox" id="serpentine">
    <br>
    <br>
    <label for="circularWeights">Circular Weights:</label>
    <input type="checkbox" id="circularWeights" />
    <br>
    <br>
    <label for="permuteWeights">Permute  Weights:</label>
    <input type="checkbox" id="permuteWeights" />
    <br>
    <br>
    <label for="randomize">Use Random Weights:</label>
    <input type="checkbox" id="randomize">
    <div id="ordered-option" style="display:none;">
      <label for="ordered_weights">Ordered:</label>
      <input type="checkbox" id="ordered_weights" name="ordered_weights" unchecked />
    </div>
    <br>
    <br>
    <label for="random_weight_factor">Random Weight Factor:</label>
    <input type="checkbox" id="random_weight_factor">
    <br>
    <br>
    <input id='weight_factor_slider' value='1' type='range' step='0.01' min='0' max='1' />
    <label id='weight_factor_value'>1</label> (Weight Factor)
    <br>
    <br>
    <label for="contrast_aware_weights2">Draw Weights from Image:</label>
    <input type="checkbox" id="contrast_aware_weights2" name="contrast_aware_weights2" />
    <br>
    <br>
    <label for="contrast_aware_weights">Draw Weights from Image Diffs:</label>
    <input type="checkbox" id="contrast_aware_weights" name="contrast_aware_weights" />
    <br>
    <br>
    <label for="block_processing">Block Dithering:</label>
    <input type="checkbox" id="block_processing" name="block_processing" />
    <div id="block_size" style="display:none;">
      <label for="block_size_slider">Block Size:</label>
      <input type="range" id="block_size_slider" min="8" max="128" value="32" step="8" />
      <span id="block_size_value">32</span>
    </div>
    <br>
    <br>
    <label for="edge_switch_checkbox">Edge Switch:</label>
    <input type="checkbox" id="edge_switch_checkbox" />
    <div id="edge-threshold-option" style="display:none;">
      <label for="edge_threshold_slider">Edge Threshold:</label>
      <input type="range" id="edge_threshold_slider" min="0.0" max="1.0" value="0.1" step="0.01" />
      <span id="edge_threshold_value">0.1</span>
    </div>
    <br>
    <br>
    <label for="filter_blur_checkbox">Apply Filter Blur:</label>
    <input type="checkbox" id="filter_blur_checkbox" />
    <div id="filter-blur-option" style="display:none;">
        <label for="filter_size_slider">Filter Size:</label>
        <input type="range" id="filter_size_slider" min="1" max="7" value="1" step="1" />
        <span id="filter_size_value">1</span>
	<br>
        <label for="blur_threshold_slider">Blur Edge Threshold:</label>
        <input type="range" id="blur_threshold_slider" min="0.0" max="1.0" value="0.1" step="0.01" />
        <span id="blur_threshold_value">0.1</span>
    </div>
    <br>
    <br>
    <label for="quantize_error_checkbox">Quantize Propagated Error:</label>
    <input type="checkbox" id="quantize_error_checkbox" />
    <div id="error-quant-option" style="display:none;">
      <label for="error_bits_slider">Error Quantization Bits (Qe):</label>
      <input type="range" id="error_bits_slider" min="1" max="16" value="8" step="1" />
      <span id="error_bits_value">8</span>
    </div>
    <br>
    <br>
    <p>Mean Squared Error (MSE): <span id="mse-label">0.00</span></p>
    <p>Signal-to-Noise Ratio (SNR): <span id="snr-label">0.00 dB</span></p>
    <p>Peak Signal-to-Noise Ratio (PSNR): <span id="psnr-label">0.00 dB</span></p>
    <p>Structural Similarity Index (SSIM): <span id="ssim-label">0.00</span></p>
    <br>
    <br>
    <button id='reset' onclick='randomize()'>randomize</button>
    <br>
    <br>
    <button id='reset' onclick='reset()'>reset to default values</button>
    <br>
    <br>
    <button id='reset' onclick='toggleOriginal()'>toggle original image</button>
  </div>

</section>

<script src='dither-dream.js'></script>

</body>
</html>

